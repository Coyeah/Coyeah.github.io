{"version":3,"file":"static/webpack/static/development/pages/blog.js.886342106492c3563ef4.hot-update.js","sources":["webpack:///./pages/blog.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport Layout from '../components/Layout';\nimport Loadable from '../components/Loadable';\nimport Link from '../components/Link';\nimport { getBlogTotal } from '../apis';\nimport { session } from '../utils/helper';\nimport styles from './blog.less';\n\nconst sessionKey = 'BLOG_TOTAL_SESSION_KEY';\n\nconst Blog = (props) => {\n  const [{data, code}, getData, setData] = getBlogTotal(data => data.items.map(({title, number}) => ({\n    title, number\n  })));\n  useEffect(() => {\n    const data = session(sessionKey);\n    if (data && data.length !== 0) {\n      setData(data);\n    } else {\n      getData().then(data => {\n        session(sessionKey, data);\n      });\n    }\n  }, []);\n\n  return (\n    <Layout title=\"博文\">\n      <Loadable loading={code !== 2 && code !== 0}>\n        <ul>\n          {data && data.map(({title, number}) => (\n            <li key={number} className={styles['blog-item']}>\n              <Link\n                href='/post/[id]'\n                as={`/post/${number}`}\n                text={title}\n              />\n            </li>\n          ))}\n        </ul>\n      </Loadable>\n    </Layout>\n  )\n}\n\n// Blog.getInitialProps = async function () {\n//   const data = await getBlogTotal();\n//   return {\n//     list: data\n//   };\n// }\n\nexport default Blog;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AADA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAaA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;;;;A","sourceRoot":""}