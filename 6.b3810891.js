(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{295:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"d",function(){return c}),n.d(t,"a",function(){return o}),n.d(t,"c",function(){return i});var a=n(24),r=function(){return Object(a.c)("medo-list")||[]},c=function(e){var t=e.list;return Object(a.c)("medo-list",t)},o=function(){return Object(a.c)("medo-cale")||{}},i=function(e){var t=e.data;return Object(a.c)("medo-cale",t)}},456:function(e,t,n){},470:function(e,t,n){},471:function(e,t,n){e.exports={layout:"src-pages-Medo-index-module__layout--2PD-U",empty:"src-pages-Medo-index-module__empty--2TRAC",title:"src-pages-Medo-index-module__title--2iz80",tips:"src-pages-Medo-index-module__tips--2a2CN",tag:"src-pages-Medo-index-module__tag--iikec"}},497:function(e,t,n){"use strict";n.r(t);n(278);var a=n(279),r=n.n(a),c=(n(137),n(41)),o=n.n(c),i=(n(42),n(85),n(363),n(302)),l=n.n(i),s=(n(303),n(304)),u=n.n(s),d=n(268),m=n.n(d),p=n(269),f=n.n(p),v=n(270),h=n.n(v),C=n(271),b=n.n(C),y=n(272),E=n.n(y),k=n(1),x=n.n(k),g=n(266),N=n.n(g),O=n(87),j=n.n(O),D=(n(373),n(375)),w=n.n(D),R=n(307),P=n.n(R),I=(n(377),n(379)),S=n.n(I),T=(n(383),n(285)),A=n.n(T),_=n(267),M=n.n(_),U=n(124),V=n.n(U),z=n(393),F=n.n(z),J=n(407),B=n.n(J),K=n(314),L=n.n(K),W=n(277),q=n.n(W),G=n(435),H=n.n(G),Q=n(6),X=n.n(Q),Y=n(436),Z=n.n(Y),$=n(440),ee=n.n($),te=n(281),ne=n.n(te),ae=Z()(),re=function(e){function t(){var e,n;m()(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=h()(this,(e=b()(t)).call.apply(e,[this].concat(r)))).state={},n}return E()(t,e),f()(t,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribe=ae.listen(function(){return e.destory()})}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"render",value:function(){var e=this.props,t=e.onOk,n=e.onCancel,a=e.transition,r=e.render,c=e.content,o=e.component,i=e.title,l=e.titleRender,s=e.footerRender,u=e.props,d=M()(e,["onOk","onCancel","transition","render","content","component","title","titleRender","footerRender","props"]),m=A()({visible:!0,onOk:t.bind(this),onCancel:n.bind(this),title:i},u,d);H()(a)&&!a&&(m=A()({},m,{transitionName:"",maskTransitionName:""})),q()(l)&&(m=A()({},m,{title:l.apply(this)||i})),q()(s)&&(m=A()({},m,{footer:s.apply(this)}));var p=c;return!p&&o&&(p=x.a.createElement(o,d)),!p&&r&&(p=r.bind(this)(this)),x.a.createElement(S.a,m,p)}}]),t}(k.PureComponent);re.open=function(e){var t=e,n=P()({},t);e=L()({title:"弹窗",delay:0,setPropsMerged:!0,autoClose:!0,maskClosable:!1,transition:!1,onOk:function(){this.props.onSubmit.bind(this)(),this.destroy()},onCancel:function(){this.destroy()},redner:B.a},n),setTimeout(function(){var t=document.createElement("div"),n=e.setPropsMerged,a=F()(e,q.a),r=(a.render,M()(a,["render"])),c=re;c=function(e){return function(t){function n(){return m()(this,n),h()(this,b()(n).apply(this,arguments))}return E()(n,t),f()(n,[{key:"render",value:function(){var t=A()({},this.props),n=t.getInstance;return q()(n)&&(t.ref=n),x.a.createElement(e,t)}}]),n}(k.PureComponent)}(c),c=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){return function(n){function a(){var t,n;m()(this,a);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(n=h()(this,(t=b()(a)).call.apply(t,[this].concat(c)))).state={},n.setProps=function(t){var a=ne()(n).state;n.setState(e?L()({},a,t):A()({},a,t))},n.forceUpdateProps=function(){n.forceUpdate()},n}return E()(a,n),f()(a,[{key:"render",value:function(){var n=this.setProps,a=this.forceUpdateProps,r=this.props,c=this.state,o={setProps:n,forceUpdateProps:a},i=e?L()({},r,c,o):A()({},r,c,o);return x.a.createElement(t,i)}}]),a}(k.PureComponent)}}(n)(c),document.body.appendChild(t),X.a.render(x.a.createElement(w.a,{locale:ee.a},x.a.createElement(c,N()({},e,{getInstance:function(n){if(n){L()(n,{destroy:function(){var e=n.onDestroy;q()(e)&&e(),X.a.unmountComponentAtNode(t),document.body.removeChild(t)}}),V()(r,function(e,t){n[t]=e.bind(n)});var a=e.state;a&&n.setState(a),n.props.forceUpdateProps()}}}))),t)},e.delay)};n(444);var ce=n(446),oe=n.n(ce),ie=n(275),le=n.n(ie),se=(n(447),n(20)),ue=n.n(se),de=(n(291),n(292)),me=n.n(de),pe=me.a.TextArea,fe=function(e){var t=e.prefixCls,n=e.type,a=e.value,r=e.onConfirm,c=e.onChange,o=M()(e,["prefixCls","type","value","onConfirm","onChange"]),i="textarea"===n?pe:me.a,l=Object(k.useRef)(null);Object(k.useEffect)(function(){l&&l.current&&l.current.focus()},[]);var s=Object(k.useCallback)(function(){r&&r()},[r]),u=Object(k.useCallback)(function(e){e&&e.target&&"string"==typeof e.target.value&&c&&c(e.target.value)},[c]);return x.a.createElement("div",N()({className:"".concat(t,"-textarea")},o),x.a.createElement(i,{ref:l,value:a,onBlur:s,onChange:u,onPressEnter:s}))},ve=(n(456),"medo-text-edit"),he=function(e){function t(){var e,n;m()(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=h()(this,(e=b()(t)).call.apply(e,[this].concat(r)))).state={isEdit:!1,current:""},n.onEditChange=function(e){if(e&&"string"==typeof e)n.setState({isEdit:!n.state.isEdit,current:e});else{if(e)return void n.setState({isEdit:!n.state.isEdit});n.setState({isEdit:!n.state.isEdit}),e=n.state.current}if(e!==n.state.prevValue){var t=n.props.onConfirm;t&&t(e)}},n.onValueChange=function(e){var t=n.props.onChange;n.setState({current:e},function(){t&&t(e)})},n.setContentRef=function(e){n.contentRef=e},n.contentRender=function(){var e=ne()(n),t=e.props,a=t.type,r=t.bold,c=t.children,i=t.placeholder,l=e.state,s=l.isEdit,u=l.current,d=e.onEditChange,m=e.onValueChange,p=e.setContentRef;return s?x.a.createElement(fe,{prefixCls:ve,type:a||"input",value:u,onChange:m,onConfirm:d}):x.a.createElement("div",{ref:p,className:"".concat(ve,"-content")},u?x.a.createElement("span",{className:ue()(le()({},"".concat(ve,"-bold"),r))},u):x.a.createElement("span",{className:ue()("".concat(ve,"-placeholder"))},i||"请编辑文本内容"),x.a.createElement(o.a,{onClick:d,className:"".concat(ve,"-options"),type:"edit"}),x.a.Children.map(c,function(e,t){return!!e&&x.a.cloneElement(e,{className:"".concat(ve,"-options")})}))},n}return E()(t,e),f()(t,[{key:"render",value:function(){return x.a.createElement("div",{className:"".concat(ve,"-layout")},this.contentRender())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevValue,a=e.value,r={prevValue:a};return n!==a&&(r.current=a),r}}]),t}(x.a.PureComponent),Ce=function(e){var t=e.value,n=e.onClick,a=M()(e,["value","onClick"]),r=Object(k.useCallback)(function(){var e=document.createElement("input");e.value=t,e.style.position="fixed",e.style.left="-1000px",e.style.top="-1000px",document.body.appendChild(e),e.select(),document.execCommand("Copy"),document.body.removeChild(e),n&&n()},[t,n]);return x.a.createElement(o.a,N()({type:"copy",onClick:r},a))},be=(n(457),n(458)),ye=n.n(be),Ee=function(e){var t=e.onDelete,n=M()(e,["onDelete"]);return x.a.createElement(ye.a,{title:"确认删除该任务项？",onConfirm:t,okText:"确认",cancelText:"取消"},x.a.createElement(o.a,N()({type:"delete"},n)))},ke=function(e){var t=e.onDelete,n=e.prefixCls,a=e.value,r=M()(e,["onDelete","prefixCls","value"]),c=Object(k.useCallback)(function(){oe.a.success("复制成功！")},[a]);return x.a.createElement("div",{className:"".concat(n,"-input")},x.a.createElement(he,N()({value:a},r),t&&x.a.createElement(Ee,{onDelete:t}),x.a.createElement(Ce,{value:a,onClick:c})))},xe={marginRight:8},ge=function(e){var t=e.prefixCls,n=e.text,a=M()(e,["prefixCls","text"]);return x.a.createElement("div",N()({className:"".concat(t,"-add")},a),n&&x.a.createElement("span",{style:xe},n),x.a.createElement(o.a,{type:"plus-circle"}))},Ne=(n(138),n(89)),Oe=n.n(Ne),je=function(e){var t=e.item,n=t.name,a=t.remarks,r=e.onTextChange,c=e.onItemDelete,i=e.onRemarksChange,l=e.prefixCls,s=(M()(e,["item","onTextChange","onItemDelete","onRemarksChange","prefixCls"]),x.a.createElement("span",null,"点击添加备注")),u=!1;return a&&a.length>0&&(u=!0,s=a.map(function(e,t){return x.a.createElement("div",{key:t},e)})),x.a.createElement("div",{className:"".concat(l,"-sub")},x.a.createElement("div",{className:"".concat(l,"-prefix")},x.a.createElement(Oe.a,{content:s,placement:"left"},x.a.createElement(o.a,{className:ue()(le()({},"".concat(l,"-prefix-work"),u)),type:"appstore",theme:"filled",onClick:i}))),x.a.createElement(ke,{prefixCls:l,value:n,onConfirm:r,onDelete:c}))},De=(n(324),n(325)),we=n.n(De),Re=n(294),Pe=n.n(Re),Ie=function(e){var t=e.onClick,n=e.list,a=Object(k.useState)(""),r=j()(a,2),c=r[0],i=r[1],l=Object(k.useState)(n||[]),s=j()(l,2),u=s[0],d=s[1],m=Object(k.useCallback)(function(){var e;e=[].concat(Pe()(u),[c]),i(""),d(e),t(e)},[t,u,c]),p=Object(k.useCallback)(function(e){var n=u;n.splice(e,1),d(Pe()(n)),t(n)},[t,u]);return x.a.createElement(x.a.Fragment,null,u.length<5&&x.a.createElement(me.a,{size:"small",value:c,onChange:function(e){return i(e.target.value)},onKeyDown:function(e){13===e.keyCode&&m()},placeholder:"请输入任务备注，最多保存五项。",addonAfter:x.a.createElement(o.a,{type:"enter",onClick:m})}),u.map(function(e,t){return x.a.createElement("div",{key:t,style:{marginTop:10}},t+1,x.a.createElement(we.a,{type:"vertical"}),e,x.a.createElement(o.a,{type:"delete",onClick:function(){return p(t)},style:{marginLeft:10}}))}))},Se=(n(470),["一","二","三","四","五","六","七","八","九","十"]),Te={padding:15},Ae=function(e){var t=e.index,n=e.name,a=e.list,c=e.onChange,i=Object(k.useState)(a.length>=7),l=j()(i,2),s=l[0],u=l[1],d=Object(k.useCallback)(function(){u(!s)},[s]),m=Object(k.useCallback)(function(){u(!1),c&&c(0,{index:t})},[c,t]),p=Object(k.useCallback)(function(){c&&c(2,{index:t})},[c,t]),f=Object(k.useCallback)(function(e){c&&c(1,{index:t,target:e})},[c,t]),v=Object(k.useCallback)(function(e,n){c&&c(1,{index:t,childrenIndex:n,target:e})},[c,t]),h=Object(k.useCallback)(function(e){c&&c(2,{index:t,childrenIndex:e})},[c,t]),C=Object(k.useCallback)(function(e){if(c){var n={list:a[e].remarks,onClick:function(n){c(3,{index:t,childrenIndex:e,target:n})}};re.open({titleRender:function(){return x.a.createElement("div",null,x.a.createElement(o.a,{type:"appstore"})," 任务备注")},transition:!0,content:x.a.createElement(Ie,n),maskClosable:!0,footerRender:function(){return null}})}},[c,t]);return x.a.createElement(r.a,{hoverable:!0,bodyStyle:Te},x.a.createElement("div",{className:"".concat("medo-item-box","-layout")},x.a.createElement("div",{className:"".concat("medo-item-box","-title-index ").concat("medo-item-box","-bold")},Se[t],"、"),x.a.createElement(ke,{bold:!0,prefixCls:"medo-item-box",value:n,onConfirm:f})),!s&&a.map(function(e,t){return x.a.createElement(je,{key:t,prefixCls:"medo-item-box",item:e,onTextChange:function(e){return v(e,t)},onRemarksChange:function(){return C(t)},onItemDelete:function(){return h(t)}})}),x.a.createElement("div",{className:"".concat("medo-item-box","-options")},x.a.createElement(o.a,{type:"up-circle",onClick:d,className:"".concat("medo-item-box","-options-icon"),style:{transform:s&&"rotate(180deg)"}}),x.a.createElement(o.a,{type:"plus-circle",onClick:m,className:"".concat("medo-item-box","-options-icon")}),x.a.createElement(Ee,{onDelete:p,className:"".concat("medo-item-box","-options-icon")})))};Ae.Add=function(e){return x.a.createElement(ge,N()({prefixCls:"medo-item-box"},e))};var _e=Ae,Me=n(24),Ue=n(295),Ve=n(471),ze=n.n(Ve),Fe=["分层级","备忘录","任务指标","细化任务"],Je=_e.Add,Be=function(e){function t(){var e,n;m()(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=h()(this,(e=b()(t)).call.apply(e,[this].concat(c)))).state={targetIndex:-1,data:[],set:[],map:{}},n.getData=u()(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,Object(Ue.b)();case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1);case 10:return e.prev=10,n.setState({data:t}),e.finish(10);case 13:case"end":return e.stop()}},e,null,[[1,7,10,13]])})),n.setData=function(){var e=u()(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ue.d)({list:t});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.formatData=function(e){e||(e=n.state.data);var t=[],a={};e.forEach(function(e){t.push(e.id),a[e.id]=e}),n.setState({set:t,map:a})},n.handleNotepadItem=function(e,t){var a=t.index,r=t.childrenIndex,c=t.target,o=n.state.data;switch(e){case 0:void 0!==a?o[a].children.push({name:"",createTime:new Date,remarks:[]}):o.push({id:Object(Me.b)(),name:"",createTime:new Date,children:[]});break;case 1:void 0!==r?o[a].children[r].name=c:o[a].name=c;break;case 2:void 0!==r?o[a].children.splice(r,1):o.splice(a,1);break;case 3:o[a].children[r].remarks=c}n.setState({data:o},function(){n.setData(o)})},n.addNewItem=function(){n.handleNotepadItem(0,{})},n.emptyRender=function(){return x.a.createElement(r.a,{className:ze.a.empty},x.a.createElement("div",{className:ze.a.title},"思维导图式待办事项"),Fe.map(function(e,t){return x.a.createElement("div",{key:t,className:ze.a.tag},e)}),x.a.createElement("div",{className:ze.a.tips},"立刻开始记事之旅 ",x.a.createElement(o.a,{type:"caret-down"})))},n}return E()(t,e),f()(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=this.state.data;return x.a.createElement("div",{className:ze.a.layout},t.map(function(t,n){return x.a.createElement(_e,{key:t.id,index:n,name:t.name,list:t.children,onChange:e.handleNotepadItem})}),0===t.length&&this.emptyRender(),x.a.createElement(Je,{onClick:this.addNewItem}))}}]),t}(k.Component);t.default=Be}}]);
//# sourceMappingURL=6.b3810891.js.map